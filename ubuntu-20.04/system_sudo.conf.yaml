- apt:
    - apt-transport-https
    - ca-certificates
    - curl
    - gnupg-agent

- shell:
    - [ 'if ! grep "\.docker\.com" /etc/apt/sources.list /etc/apt/sources.list.d/*; then curl -fsSL https://download.docker.com/linux/ubuntu/gpg | apt-key add - && UBUNTU_VERSION=$(lsb_release -cs) && add-apt-repository --no-update "deb [arch=amd64] https://download.docker.com/linux/ubuntu $UBUNTU_VERSION stable"; fi', Adding Docker's APT repository]
    - [ 'if ! grep "\.yktooo" /etc/apt/sources.list /etc/apt/sources.list.d/*; then apt-add-repository --no-update ppa:yktooo/ppa ; fi', Adding yktooo's PPA]
    - [ '[ ! -f /etc/apt/trusted.gpg.d/microsoft.gpg ] && wget -qO- https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor > /tmp/microsoft.gpg && install -o root -g root -m 644 /tmp/microsoft.gpg /etc/apt/trusted.gpg.d/ && echo "deb [arch=amd64,arm64,armhf signed-by=/etc/apt/trusted.gpg.d/microsoft.gpg] https://packages.microsoft.com/repos/code stable main" > /etc/apt/sources.list.d/vscode.list || :', VScode APT source]
#- [ '[ ! -f /usr/share/X11/xkb/symbols/us.backup ] && cp /usr/share/X11/xkb/symbols/us /usr/share/X11/xkb/symbols/us.backup && cp -f keyboard/us.luc /usr/share/X11/xkb/symbols/us || :', "Install Luc's US Keyboard layout" ]

#- sshuttle
#- guake
- apt:
    - tilix
    - filezilla
    - nautilus-admin
    - code
    - gnome-tweaks
    - neofetch
    - zsh
    - bridge-utils
    - build-essential
    - cmake
    - llvm
    - clang
    - gdb
    - gdbserver
    - lldb
    - cpu-checker
    - default-jdk
    - diffutils
    - e2fsprogs
    - findutils
    - firefox
    - flatpak
    - fonts-firacode
    - git
    - gparted
    - grep
    - gwenview
    - gzip
    - htop
    - aspell-en
    - hunspell-en-us
    - hyphen-en-us
    - jq
    - libffi-dev
    - libgl1-mesa-glx:i386
    - libreadline-dev
    - libssl-dev
    - libxml2-dev
    - mythes-en-us
    - mlocate
    - ncurses-base
    - ncurses-bin
    - python-is-python3
    - python3-gpg
    - python3-pip
    - python3-venv
    - rclone
    - shellcheck
    - tmux
    - tree
    - vim
    - wireshark-qt
    - xclip
    - xz-utils
    - gimp
    - inkscape
    - minicom
    - vlc
    - kazam
    - dconf-editor
    - indicator-sound-switcher
    - virtualbox
    - discord
    - containerd.io
    - docker-ce
    - docker-ce-cli
    - qemu-system-arm
    - qemu-system-x86
    - qemu-user-static
    - texlive-full

- shell:
    - [update-alternatives --set x-terminal-emulator /usr/bin/tilix.wrapper, Tilix term by default]
    - [TEMP_DEB=$(mktemp) && wget -O "$TEMP_DEB" 'https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb' && dpkg --skip-same-version -i "$TEMP_DEB" && rm -f "$TEMP_DEB", Installing Google Chrome]
    - [apt --fix-broken -y install, Installing Google Chrome dependencies]

- shell:
    - ['flatpak remote-add --if-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo', Adding the Flathub repository to Flatpak]
    # - [flatpak install flathub com.toggl.TogglDesktop, Installing Toggl Desktop]
    - [flatpak install -y flathub com.getpostman.Postman, 'Install Postman']
